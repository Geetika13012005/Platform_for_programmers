import{j as e}from"./ui-components-BkbobCHY.js";import{u as a,H as s,a as r}from"./Header-CnkfzlY_.js";import{u as t,f as i,a as n}from"./react-vendor-BoqOdX8w.js";function o(){const o=t(),[l]=i(),c="signup"===l.get("mode")?"signup":"login",[m,u]=n.useState(c),{refresh:d}=a(),[h,p]=n.useState("");return n.useEffect(()=>{u(c)},[c]),e.jsxs("div",{className:"auth-page",children:[e.jsx(s,{}),e.jsx("main",{className:"container",children:e.jsxs("div",{className:"auth-container",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h1",{className:"auth-title",children:"signup"===m?"Create your account":"Welcome back"}),e.jsx("p",{className:"auth-subtitle",children:"signup"===m?"Start your first notebook in seconds":"Sign in to continue"})]}),e.jsxs("form",{onSubmit:async function(e){e.preventDefault();const a=new FormData(e.currentTarget),s=String(a.get("email")||"").trim(),t=String(a.get("password")||"").trim(),i=String(a.get("name")||"").trim();p("");try{let e;"signup"===m?(e=await r("/api/auth/signup",{method:"POST",body:JSON.stringify({email:s,password:t,name:i}),showAuthErrors:!0}),e?.token&&localStorage.setItem("auth_token",e.token)):(e=await r("/api/auth/login",{method:"POST",body:JSON.stringify({email:s,password:t}),showAuthErrors:!0}),e?.token&&localStorage.setItem("auth_token",e.token)),await d(),o("/dashboard")}catch(n){const e=String(n?.message||n||"");if(/network error/i.test(e))return void p("Network error. Please check your connection and try again.");if(/already exists/i.test(e)||/409/.test(e))return u("login"),void p("Email already registered. Please sign in.");if(/invalid/i.test(e)||/401/.test(e))return void p("Invalid email or password.");if(/400/.test(e))return void p("Please fill in all required fields.");p(e||"An error occurred. Please try again.")}},className:"form",children:[h&&e.jsx("div",{className:"error-message",children:h}),"signup"===m&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("input",{name:"name",required:!0,placeholder:"Ada Lovelace",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",name:"email",required:!0,placeholder:"you@example.com",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",name:"password",required:!0,placeholder:"••••••••",className:"form-input"})]}),e.jsx("button",{className:"button button-primary button-full",children:"signup"===m?"Create account":"Sign in"})]}),e.jsx("div",{className:"text-center text-sm mt-4",children:"signup"===m?e.jsxs("span",{children:["Already have an account?"," ",e.jsx("button",{className:"link",onClick:()=>u("login"),children:"Sign in"})]}):e.jsxs("span",{children:["New here?"," ",e.jsx("button",{className:"link",onClick:()=>u("signup"),children:"Create an account"})]})})]})})]})}export{o as default};
