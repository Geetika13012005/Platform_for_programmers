import{j as e}from"./ui-components-BkbobCHY.js";import{u as s,a as t,H as a}from"./Header-CnkfzlY_.js";import{u as i,f as n,a as r}from"./react-vendor-BoqOdX8w.js";import"./index-BImargMW.js";const o="print('Hello from Python!')";function c(){const{user:c,loading:l}=s(),d=i(),[u,m]=n(),[h,f]=r.useState(null),[j,x]=r.useState([]),[y,p]=r.useState("Untitled Notebook"),w=r.useRef(null);return r.useEffect(()=>{!l&&c&&d("/dashboard")},[c,l,d]),r.useEffect(()=>{!async function(){if(l||!c)return;const e=u.get("nb");async function s(){if(e&&"undefined"!==e&&"null"!==e){const s=await t(`/api/notebooks/${e}`);return f(s),p(s.title||"Untitled Notebook"),x(Array.isArray(s.cells)?s.cells:[{id:crypto.randomUUID(),language:"python",code:o}]),!0}const s=await t("/api/notebooks");if(s.length>0){const e=s[0];return f(e),p(e.title||"Untitled Notebook"),x(Array.isArray(e.cells)?e.cells:[{id:crypto.randomUUID(),language:"python",code:o}]),m(s=>{const t=new URLSearchParams(s);return t.set("nb",e.id),t},{replace:!0}),!0}const a=await t("/api/notebooks",{method:"POST",body:JSON.stringify({})});return f(a),p(a.title||"Untitled Notebook"),x(Array.isArray(a.cells)?a.cells:[{id:crypto.randomUUID(),language:"python",code:o}]),m(e=>{const s=new URLSearchParams(e);return s.set("nb",a.id),s},{replace:!0}),!0}try{await s()}catch(a){const e=String(a?.message||a||"");if(/not authenticated/i.test(e)||/401/.test(e)){try{const e=await t("/api/auth/me");if(e?.id)return void(await s())}catch{}d("/auth")}}}()},[l,c]),r.useEffect(()=>{if(c)return;const e=localStorage.getItem("notebook:default");if(e)try{return void x(JSON.parse(e))}catch{}x([{id:crypto.randomUUID(),language:"python",code:o}])},[c]),r.useEffect(()=>{j&&(c?h&&(window.clearTimeout(w.current||void 0),w.current=window.setTimeout(async()=>{try{const e=await t(`/api/notebooks/${h.id}`,{method:"PUT",body:JSON.stringify({title:y,cells:j})});f(e)}catch(e){}},600)):localStorage.setItem("notebook:default",JSON.stringify(j)))},[j,y,c,h]),l?e.jsxs("div",{children:[e.jsx(a,{}),e.jsx("main",{className:"container",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx("div",{children:"Loading..."})})]}):c?null:e.jsxs("div",{children:[e.jsx(a,{}),e.jsx("main",{children:e.jsxs("div",{className:"welcome",children:[e.jsxs("h1",{children:["Welcome to ",e.jsx("span",{className:"highlight",children:"Colaboratory"})]}),e.jsx("p",{children:'Colaboratory, or "Colab" for short, lets you write and execute code through your browser. Perfect for data analysis, machine learning and education.'}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{onClick:()=>d("/auth?mode=signup"),className:"button button-primary",children:"Start coding now"}),e.jsx("button",{onClick:()=>d("/auth"),className:"button button-secondary",children:"Sign in to continue"})]}),e.jsxs("div",{className:"preview-card",children:[e.jsxs("div",{className:"preview-header",children:[e.jsx("span",{children:"Notebook preview"}),e.jsx("span",{children:"Python â€¢ C++ â€¢ JavaScript"})]}),e.jsx("pre",{className:"preview",children:o})]}),e.jsxs("div",{className:"welcome-features",children:[e.jsxs("div",{className:"welcome-feature",children:[e.jsx("div",{className:"welcome-feature-icon",children:"âŸ²"}),e.jsx("div",{className:"welcome-feature-title",children:"No setup required"}),e.jsx("div",{className:"welcome-feature-desc",children:"Open your browser and start coding. No installs."})]}),e.jsxs("div",{className:"welcome-feature",children:[e.jsx("div",{className:"welcome-feature-icon",children:"ðŸ‘¥"}),e.jsx("div",{className:"welcome-feature-title",children:"Easy sharing"}),e.jsx("div",{className:"welcome-feature-desc",children:"Share notebooks with a link for effortless collaboration."})]}),e.jsxs("div",{className:"welcome-feature",children:[e.jsx("div",{className:"welcome-feature-icon",children:"âš¡"}),e.jsx("div",{className:"welcome-feature-title",children:"Powerful computing"}),e.jsx("div",{className:"welcome-feature-desc",children:"Run Python, C++ and JS with safe, sandboxed execution."})]})]}),e.jsxs("div",{className:"welcome-section",children:[e.jsx("div",{className:"welcome-section-title",children:"Perfect for data science and machine learning"}),e.jsxs("ul",{className:"welcome-list",children:[e.jsxs("li",{children:[e.jsx("div",{className:"font-medium",children:"Data Analysis"}),e.jsx("div",{children:"Import, clean and analyze datasets with popular libraries."})]}),e.jsxs("li",{children:[e.jsx("div",{className:"font-medium",children:"Machine Learning"}),e.jsx("div",{children:"Build and train models. Great for tutorials and demos."})]}),e.jsxs("li",{children:[e.jsx("div",{className:"font-medium",children:"Education"}),e.jsx("div",{children:"Create interactive tutorials and assignments in the browser."})]}),e.jsxs("li",{children:[e.jsx("div",{className:"font-medium",children:"Research"}),e.jsx("div",{children:"Reproducible research with embedded code and visualizations."})]})]})]}),e.jsxs("div",{className:"welcome-footer",children:[e.jsx("div",{children:"Ready to get started?"}),e.jsx("button",{onClick:()=>d("/auth?mode=signup"),className:"button button-primary",children:"Create your first notebook"})]})]})})]})}export{c as default};
