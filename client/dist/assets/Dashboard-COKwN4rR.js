import{j as t}from"./ui-components-BkbobCHY.js";import{u as e,a as n,H as a}from"./Header-CnkfzlY_.js";import{u as o,a as i}from"./react-vendor-BoqOdX8w.js";const s=[{id:"s_python_ml",title:"Python Machine Learning Intro",tag:"PYTHON",color:"bg-blue-600",cells:[{id:crypto.randomUUID(),language:"python",code:"import numpy as np\nimport pandas as pd\nprint('Hello ML!')"}]},{id:"s_pandas",title:"Data Analysis with Pandas",tag:"PYTHON",color:"bg-blue-600",cells:[{id:crypto.randomUUID(),language:"python",code:"import pandas as pd\ndf = pd.DataFrame({'a':[1,2,3]})\nprint(df.describe())"}]},{id:"s_cpp_stats",title:"C++ Statistical Computing",tag:"CPP",color:"bg-purple-600",cells:[{id:crypto.randomUUID(),language:"cpp",code:'#include <bits/stdc++.h>\nusing namespace std;\nint main(){\n  vector<int> v{1,2,3};\n  double avg = accumulate(v.begin(),v.end(),0.0)/v.size();\n  cout << avg << "\\n";\n  return 0;\n}'}]},{id:"s_js_data",title:"JavaScript Data Processing",tag:"JAVASCRIPT",color:"bg-amber-600",cells:[{id:crypto.randomUUID(),language:"javascript",code:"const arr=[1,2,3]; console.log(arr.map(x=>x*2).join(', '))"}]}];function r(){const{user:r,loading:l,logout:d}=e(),c=o(),[p,m]=i.useState(""),[u,g]=i.useState([]),[x,b]=i.useState(!0),y=i.useRef(null);i.useEffect(()=>{l||r||c("/auth")},[l,r,c]),i.useEffect(()=>{!async function(){if(r&&!l)try{b(!0);const t=await n("/api/notebooks");g(Array.isArray(t)?t:[])}catch(t){g([])}finally{b(!1)}}()},[r,l]);const h=i.useMemo(()=>{const t=p.toLowerCase();return s.filter(e=>e.title.toLowerCase().includes(t))},[p]),f=i.useCallback(async t=>{try{const e=await n("/api/notebooks",{method:"POST",body:JSON.stringify({cells:t})}),a=e?.id||e?._id;if(!a)return void alert("Notebook created but no valid ID returned!");c(`/notebook/${a}`)}catch(e){alert("Failed to create notebook. Please try again.")}},[c]);return l||!r?t.jsxs("div",{children:[t.jsx(a,{}),t.jsx("main",{className:"container",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:t.jsx("div",{children:"Loading..."})})]}):t.jsxs("div",{children:[t.jsx(a,{}),t.jsxs("main",{className:"container",style:{maxWidth:1e3,margin:"0 auto",padding:"clamp(1rem, 3vw, 2rem) clamp(0.5rem, 2vw, 1rem)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},children:[t.jsxs("div",{style:{flex:"1 1 auto",minWidth:"250px"},children:[t.jsxs("h1",{style:{fontSize:"clamp(24px, 5vw, 32px)",fontWeight:800,marginBottom:8},children:["Welcome, ",r.name||"User"]}),t.jsx("p",{style:{fontSize:"clamp(14px, 2.5vw, 17px)",color:"#444",marginBottom:0,maxWidth:700},children:"Colaboratory is a free notebook environment. Execute Python, C++, and JavaScript code with built-in libraries."})]}),t.jsx("button",{onClick:async function(){try{await d(),c("/auth")}catch(t){}},className:"button button-secondary",children:"Logout"})]}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:12,marginBottom:24},children:[t.jsx("button",{onClick:()=>c("/notebook/new"),className:"button button-primary",children:"+ New notebook"}),t.jsxs("label",{className:"button button-secondary",style:{cursor:"pointer"},children:["Upload",t.jsx("input",{type:"file",accept:"application/json,.json",style:{display:"none"},onChange:t=>{const e=t.currentTarget.files?.[0];e&&async function(e){try{const t=await e.text(),n=JSON.parse(t);if(Array.isArray(n))await f(n);else{if(!Array.isArray(n?.cells))throw new Error("Unsupported file format");await f(n.cells)}}catch(t){alert(t?.message||String(t))}}(e)}})]}),t.jsx("button",{onClick:()=>f(s[0].cells),className:"button button-secondary",children:"Open sample notebook"})]}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:12,marginBottom:32},children:[t.jsx("input",{ref:y,value:p,onChange:t=>m(t.target.value),placeholder:"Search notebooks",className:"form-input",style:{width:260,fontSize:15}}),t.jsx("button",{className:"button button-secondary",children:"Filter"}),t.jsx("button",{className:"button button-secondary",children:"â˜°"})]}),t.jsx("h2",{style:{fontSize:"clamp(18px, 4vw, 22px)",fontWeight:700,margin:"32px 0 16px 0"},children:"Your Notebooks"}),x?t.jsx("div",{children:"Loading notebooks..."}):u.length>0?t.jsx("div",{style:{display:"grid",gap:24,gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",marginBottom:40},children:u.map(e=>t.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",padding:20},children:[t.jsx("div",{style:{fontSize:17,fontWeight:600,marginBottom:8},children:e.title||"Untitled Notebook"}),t.jsx("div",{style:{fontSize:13,color:"#888",marginBottom:16},children:new Date(e.updatedAt||e.createdAt).toLocaleDateString()}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:t.jsx("button",{onClick:()=>c(`/notebook/${e.id}`),className:"button button-primary",style:{fontSize:15,padding:"6px 18px"},children:"Open"})})]},e.id))}):t.jsxs("div",{style:{textAlign:"center",padding:40,border:"1px dashed #ddd",borderRadius:14,marginBottom:40},children:[t.jsx("p",{children:"You don't have any notebooks yet."}),t.jsx("button",{onClick:()=>c("/notebook/new"),className:"button button-primary",children:"Create your first notebook"})]}),t.jsx("h2",{style:{fontSize:"clamp(18px, 4vw, 22px)",fontWeight:700,margin:"32px 0 16px 0"},children:"Machine Learning Examples"}),t.jsx("div",{style:{display:"grid",gap:24,gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",marginBottom:40},children:h.map(e=>t.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",padding:20},children:[t.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#888",marginBottom:4},children:e.tag}),t.jsx("div",{style:{fontSize:17,fontWeight:600},children:e.title}),t.jsxs("div",{style:{marginTop:18,display:"flex",alignItems:"center",gap:12},children:[t.jsx("span",{style:{display:"inline-block",height:10,width:10,borderRadius:"50%",background:"PYTHON"===e.tag?"#2563eb":"CPP"===e.tag?"#a78bfa":"#f59e0b"}}),t.jsx("button",{onClick:()=>f(e.cells),className:"button button-primary",style:{fontSize:15,padding:"6px 18px"},children:"Open Notebook"})]})]},e.id))})]})]})}crypto.randomUUID();export{r as default};
